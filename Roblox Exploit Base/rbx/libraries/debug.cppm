//module;

export module rbx.library.debug;

import rbx.api;
import rbx.object;
import rbx.library.util;

static int getmetatable(rbx::State* R) {
	if (!rbx::getmetatable(R, 1)) {
		rbx::pushnil(R);
	}

	return 1;
}

static int setmetatable(rbx::State* R) {
	rbx::setmetatable(R, 1);
	return 1;
}

export namespace rbx::library {
	auto debug = [](rbx::State* R) {
		rbx::newtable(R);
		rbx::library::push_method(R, "getmetatable", ::getmetatable);
		rbx::library::push_method(R, "setmetatable", ::setmetatable);
		rbx::setglobal(R, "debug");
	};
}
